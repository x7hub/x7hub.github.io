<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>x7's blog</title><link href="http://x7hub.github.io/" rel="alternate"></link><link href="http://x7hub.github.io/feeds/shell.atom.xml" rel="self"></link><id>http://x7hub.github.io/</id><updated>2013-11-30T00:00:00+08:00</updated><entry><title>对比zsh和bash中的数组与关联数组</title><link href="http://x7hub.github.io/pages/zsh_array.html" rel="alternate"></link><updated>2013-11-30T00:00:00+08:00</updated><author><name>x7</name></author><id>tag:x7hub.github.io,2013-11-30:pages/zsh_array.html</id><summary type="html">&lt;p&gt;参考：&lt;/p&gt;
&lt;p&gt;Linux Shell脚本攻略 人民邮电出版社&lt;/p&gt;
&lt;h3&gt;数组&lt;/h3&gt;
&lt;p&gt;可以这样定义数组，在&lt;code&gt;bash&lt;/code&gt;和&lt;code&gt;zsh&lt;/code&gt;都可以，&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;array_var&lt;/span&gt;&lt;span class="o"&gt;=(&lt;/span&gt;1 2 3 4 5 6&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;但是，读数组的时候有区别，在&lt;code&gt;bash&lt;/code&gt;中，数组索引以&lt;code&gt;0&lt;/code&gt;开始，符合一般习惯，&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;[&lt;/span&gt;x7@localhost ~&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="nv"&gt;$ array_var&lt;/span&gt;&lt;span class="o"&gt;=(&lt;/span&gt;1 2 3 4 5 6&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;x7@localhost ~&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;array_var&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt;
1
&lt;span class="o"&gt;[&lt;/span&gt;x7@localhost ~&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;array_var&lt;/span&gt;&lt;span class="p"&gt;[0]&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt;
1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;但是，在&lt;code&gt;zsh&lt;/code&gt;中，数组索引以&lt;code&gt;1&lt;/code&gt;开始，索引&lt;code&gt;0&lt;/code&gt;是空的，&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;~/workspace/shell % &lt;span class="nv"&gt;array_var&lt;/span&gt;&lt;span class="o"&gt;=(&lt;/span&gt;1 2 3 4 5 6&lt;span class="o"&gt;)&lt;/span&gt;
~/workspace/shell % &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;array_var&lt;/span&gt;&lt;span class="p"&gt;[0]&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt;

~/workspace/shell % &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;array_var&lt;/span&gt;&lt;span class="p"&gt;[1]&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt;
1
~/workspace/shell % &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;array_var&lt;/span&gt;&lt;span class="p"&gt;[2]&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt;
2
~/workspace/shell % &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;array_var&lt;/span&gt;&lt;span class="p"&gt;[6]&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt;
6
~/workspace/shell % &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;array_var&lt;/span&gt;&lt;span class="p"&gt;[7]&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt; 

~/workspace/shell % &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;array_var&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt;
1 2 3 4 5 6
~/workspace/shell % &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;array_var&lt;/span&gt;&lt;span class="p"&gt;[*]&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt; 
1 2 3 4 5 6
~/workspace/shell % &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;array_var&lt;/span&gt;&lt;span class="p"&gt;[@]&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt; 
1 2 3 4 5 6
~/workspace/shell % &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="k"&gt;${#&lt;/span&gt;&lt;span class="nv"&gt;array_var&lt;/span&gt;&lt;span class="p"&gt;[*]&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt;
6
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;关联数组&lt;/h3&gt;
&lt;p&gt;在&lt;code&gt;bash&lt;/code&gt;中，可以这样声明关联数组，&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;[&lt;/span&gt;x7@localhost ~&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;declare&lt;/span&gt; -A ass_array
&lt;span class="o"&gt;[&lt;/span&gt;x7@localhost ~&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="nv"&gt;$ ass_array&lt;/span&gt;&lt;span class="o"&gt;=([&lt;/span&gt;index1&lt;span class="o"&gt;]=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;val1&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;index2&lt;span class="o"&gt;]=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;val2&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;但是在&lt;code&gt;zsh&lt;/code&gt;中就不行，&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;~ % &lt;span class="nb"&gt;declare&lt;/span&gt; -A ass_array 
~ % &lt;span class="nv"&gt;ass_array&lt;/span&gt;&lt;span class="o"&gt;=([&lt;/span&gt;index1&lt;span class="o"&gt;]=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;val1&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;index2&lt;span class="o"&gt;]=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;val2&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
zsh: no matches found: &lt;span class="o"&gt;[&lt;/span&gt;index1&lt;span class="o"&gt;]=&lt;/span&gt;val1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;只能这样才行，&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;~ % &lt;span class="nb"&gt;declare&lt;/span&gt; -A ass_array
~ % ass_array&lt;span class="o"&gt;[&lt;/span&gt;index1&lt;span class="o"&gt;]=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;val1&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;另外，在&lt;code&gt;bash&lt;/code&gt;访问数组需要加大括号，不加的话拿到的是奇怪的东西，&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;[&lt;/span&gt;x7@localhost ~&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;ass_array&lt;/span&gt;&lt;span class="p"&gt;[index1]&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt;
val1
&lt;span class="o"&gt;[&lt;/span&gt;x7@localhost ~&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$ass_array&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;index1&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;index1&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;在&lt;code&gt;zsh&lt;/code&gt;中就可以不用大括号直接拿，&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;~ % &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;ass_array&lt;/span&gt;&lt;span class="p"&gt;[index1]&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt;
val1
~ % &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$ass_array&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;index1&lt;span class="o"&gt;]&lt;/span&gt;
val1
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;暂时就这些&lt;/h3&gt;
&lt;p&gt;看来zsh和bash有好多不同啊，以前都没在意过。。。&lt;/p&gt;</summary><category term="linux"></category><category term="shell"></category></entry></feed>