<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"><channel><title>x7's blog - PHP</title><link>https://x7blog.info/</link><description></description><lastBuildDate>Thu, 17 Dec 2015 00:00:00 +0800</lastBuildDate><item><title>Emoji表情传输和保存：对非BMP范围的Unicode字符的处理</title><link>https://x7blog.info/archives/php_emoji_to_unicode.html</link><description>&lt;p&gt;参考：&lt;/p&gt;
&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/UTF-16"&gt;UTF-16&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/Emoji"&gt;Emoji&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://cenalulu.github.io/linux/character-encoding/"&gt;十分钟搞清字符集和字符编码&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://stackoverflow.com/questions/27287369/4-byte-unicode-character-in-java"&gt;4 byte unicode character in Java&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Emoji与Unicode、UTF8&lt;/h2&gt;
&lt;p&gt;Emoji是一种特殊的字符，而不是像QQ表情一样的普通字符的转义表示。在Unicode编码中，占用了&lt;code&gt;U+1F300&lt;/code&gt;到&lt;code&gt;U+1F64F&lt;/code&gt;中的&lt;a href="https://en.wikipedia.org/wiki/Emoji#Unicode_Blocks"&gt;部分范围&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;Emoji字符的特殊之处在于，其使用的Unicode字符超出了通常使用的三字节UTF-8编码的Unicode范围，即BMP范围&lt;code&gt;U+0000&lt;/code&gt;到&lt;code&gt;U+FFFF&lt;/code&gt;。按照&lt;a href="https://en.wikipedia.org/wiki/UTF-8#Codepage_layout"&gt;UTF-8编码规范&lt;/a&gt;，Emoji字符属于辅助平面范围，通常对应4字节的UTF-8编码。&lt;/p&gt;
&lt;h2&gt;Android上Emoji的特殊表示&lt;/h2&gt;
&lt;p&gt;在Android上显示Emoji出现问题根源在于Java的char长度是两个字节，因此不能直接表示BMP范围外的Unicode字符，包括Emoji。对于BMP范围外的字符，Java没有直接编码的方案，而是&lt;a href="http://stackoverflow.com/questions/27287369/4-byte-unicode-character-in-java"&gt;采用一种替代手段&lt;/a&gt;，使用两个char来表示一个字符，称为high surrogate和low surrogate。其中high surrogate使用的是&lt;code&gt;U …&lt;/code&gt;&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">x7</dc:creator><pubDate>Thu, 17 Dec 2015 00:00:00 +0800</pubDate><guid isPermaLink="false">tag:x7blog.info,2015-12-17:/archives/php_emoji_to_unicode.html</guid><category>Emoji</category><category>Unicode</category><category>PHP</category><category>Lua</category></item></channel></rss>