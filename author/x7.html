<!DOCTYPE html>
<html lang="zhs">
<head>
    <meta charset="utf-8">
    <title>x7's blog - x7</title>
    <meta name="description" content="">
    <meta name="author" content="x7">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="../theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="../theme/bootstrap.min.css" rel="stylesheet">
    <link href="../theme/bootstrap.min.responsive.css" rel="stylesheet">
    <link href="../theme/local.css" rel="stylesheet">
    <link href="../theme/pygments.css" rel="stylesheet">

    <!-- So Firefox can bookmark->"abo this site" -->
        <link href="https://x7blog.info/feeds/all.rss.xml" rel="alternate" title="x7's blog" type="application/rss+xml">

</head>

<body>

<div class="navbar">
    <div class="navbar-inner">
    <div class="container">

         <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
         </a>

        <a class="brand" href="..">x7's blog</a>

        <div class="nav-collapse">
        <ul class="nav">
            
            <li><a href="../pages/about-me.html">About me</a></li>
        </ul>
        </div>
        
    </div>
    </div>
</div>

<div class="container">
    <div class="content">
    <div class="row">

        <div class="span9">
        

        


    <div class='article'>
        <div class="content-title">
            <a href="../archives/php_emoji_to_unicode.html"><h1>Emoji表情传输和保存：对非BMP范围的Unicode字符的处理</h1></a>
Thu 17 December 2015

by <a class="url fn" href="../author/x7.html">x7</a>
 


 
        </div>
        
        <div><p>参考：</p>
<p><a href="https://en.wikipedia.org/wiki/UTF-16">UTF-16</a></p>
<p><a href="https://en.wikipedia.org/wiki/Emoji">Emoji</a></p>
<p><a href="http://cenalulu.github.io/linux/character-encoding/">十分钟搞清字符集和字符编码</a></p>
<p><a href="http://stackoverflow.com/questions/27287369/4-byte-unicode-character-in-java">4 byte unicode character in Java</a></p>
<h2>Emoji与Unicode、UTF8</h2>
<p>Emoji是一种特殊的字符，而不是像QQ表情一样的普通字符的转义表示。在Unicode编码中，占用了<code>U+1F300</code>到<code>U+1F64F</code>中的<a href="https://en.wikipedia.org/wiki/Emoji#Unicode_Blocks">部分范围</a>。</p>
<p>Emoji字符的特殊之处在于，其使用的Unicode字符超出了通常使用的三字节UTF-8编码的Unicode范围，即BMP范围<code>U+0000</code>到<code>U+FFFF</code>。按照<a href="https://en.wikipedia.org/wiki/UTF-8#Codepage_layout">UTF-8编码规范</a>，Emoji字符属于辅助平面范围，通常对应4字节的UTF-8编码。</p>
<h2>Android上Emoji的特殊表示</h2>
<p>在Android上显示Emoji出现问题根源在于Java的char长度是两个字节，因此不能直接表示BMP范围外的Unicode字符，包括Emoji。对于BMP范围外的字符，Java没有直接编码的方案，而是<a href="http://stackoverflow.com/questions/27287369/4-byte-unicode-character-in-java">采用一种替代手段</a>，使用两个char来表示一个字符，称为high surrogate和low surrogate。其中high surrogate使用的是<code>U+D800</code>–<code>U+DBFF</code>，low surrogate使用的是<code>U+DC00</code>-<code>U+DFFF</code>，这两个范围都是Unicode编码的保留范围，专门用于表示surrogate字符。</p>
<p>举个栗子，Unicode编码为<code>U+1F602</code>的Emoji符号。</p>
<p><img alt="Face With Tears of Joy" src="https://emojipedia-us.s3.amazonaws.com/cache/3e/a3/3ea3af3cf1f2a75b62bec201c87cd995.png"></p>
<p>在Java中看一下对它的存储和编码：</p>
<div class="highlight"><pre><span></span><span class="kt">char</span><span class="o">[]</span> <span class="n">tear</span> <span class="o">=</span> <span class="n">Character</span><span class="o">.</span><span class="na">toChars</span><span class="o">(</span><span class="mh">0x1F602</span><span class="o">);</span> <span class="c1">// Face with Tears of Joy</span>
<span class="kd">final</span> <span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">tear</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">length</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
<span class="kt">int</span> <span class="n">byteLength</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="n">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">).</span><span class="na">length</span><span class="o">;</span>
<span class="n">String</span> <span class="n">escape</span> <span class="o">=</span> <span class="n">StringEscapeUtils</span><span class="o">.</span><span class="na">escapeJava</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>

<span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">&quot;s &quot;</span> <span class="o">+</span> <span class="n">s</span><span class="o">);</span>
<span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">&quot;length &quot;</span> <span class="o">+</span> <span class="n">length</span><span class="o">);</span>
<span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">&quot;byteLength &quot;</span> <span class="o">+</span> <span class="n">byteLength</span><span class="o">);</span>
<span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">&quot;escape &quot;</span> <span class="o">+</span> <span class="n">escape</span><span class="o">);</span>
</pre></div>


<p>输出如下：</p>
<div class="highlight"><pre><span></span>12-18 14:37:11.437 28246-28246/info.x7res.myapplication I/MainActivity: s ��
12-18 14:37:11.437 28246-28246/info.x7res.myapplication I/MainActivity: length 2
12-18 14:37:11.437 28246-28246/info.x7res.myapplication I/MainActivity: byteLength 4
12-18 14:37:11.437 28246-28246/info.x7res.myapplication I/MainActivity: escape \uD83D\uDE02
</pre></div>


<p>String对象的长度为<code>2</code>，编码为UTF-8字节数组后长度为<code>4</code>，单个字符unicode-escape编码结果为<code>\uD83D\uDE02</code>。因此，虽然Java不能支持直接用单个Unicode字符表示Emoji表情，但是通过使用两个surrogate字符的替代方案也能很好的支持Emoji表情的保存和编码显示。</p>
<h2>Lua对Emoji字符串的处理</h2>
<p>Lua的字符串只能是ANSI编码，不支持Unicode字符的字符串。本节下文是在<a href="https://www.zybuluo.com/miniknife/note/148136">触动精灵</a>框架下，在Android上的Lua解释器测试得到的结论。</p>
<p>在Lua中，一个Emoji字符是6个字节长度，而不是直接UTF-8编码得到的4个字节。这是在Java两个surrogate字符表示一个Emoji字符的基础上，又对这两个surrogate字符进行标准UTF-8编码，得到的6个字节的字符串。</p>
<h2>PHP对Emoji字符的接收和保存</h2>
<p>对于Android或者Lua经过urlencode上传的Emoji字符，在服务器的PHP上经过自动的urldecode会得到6个字节长度的2个字符，这里的表现是与Android相匹配的。</p>
<p>问题出现在数据保存，虽然MySQL提供的utf8mb4编码支持4字节的UTF-8字符，但是要做匹配的另一批数据保存到了MongoDB，中文字符保存在成json格式时自动转为了unicode-escape编码，不能支持多字节的UTF-8字符或非BMP的unicode字符。因此为了与其他平台的数据做匹配，要求按照unicode-escape编码数据，即要求将<code>U+1F602</code>编码为<code>\uD83D\uDE02</code>。</p>
<p>PHP并没有提供Python一样便利的编解码，而且也并不认为现unicode-escape是一种编码格式，因此没有直接encode字符串的方法。对于普通的BMP范围内的字符，比如中文字符，可以通过<code>json_encode</code>方法<a href="http://stackoverflow.com/questions/7381900/php-decoding-and-encoding-json-with-unicode-characters">实现unicode-escape编码</a>，与Python的处理方式类似。</p>
<div class="highlight"><pre><span></span><span class="x">$nickname_unicode = trim(json_encode($nickname), &#39;&quot;&#39;);</span>
</pre></div>


<p>然而，与Python不同的是，PHP(5.6)的<code>json_encode</code>方法认为<code>U+D800</code>-<code>U+DFFF</code>的范围是非法的，不能处理带有上述6字节Emoji符号的字符串，这样会得到空的结果。所以要实现保留字段的unicode-escape编码，需要重写<code>json_encode</code>方法。这里参考了<a href="https://github.com/amekkawi/diskusagereports/blob/master/scripts/inc/json_encode.php">一个开源项目的一部分代码</a>。</p>
<p>重写的<code>json_encode</code>代码放在了<a href="https://gist.github.com/x7hub/32615114d4a540d64502">我的gist</a>，注意与原本的参考代码不同的是，173-175行的<code>mb_convert_encoding</code>被注释掉，否则将使用PHP自带的<code>mb_convert_encoding</code>方法，对于Unicode保留字符同样不能正常编码。</p></div>
        <hr />
    </div>
		

 
        

 

    <div class='article'>
        <a href="../archives/monkeyrunner_input_unicode.html"><h2>MonkeyRunner利用剪贴板输入中文</h2></a>
        <div class= "well small"> Mon 17 August 2015

by <a class="url fn" href="../author/x7.html">x7</a>
 


 </div>
        <div class="summary"><p>参考：</p>
<p><a href="http://developer.android.com/tools/help/MonkeyRunner.html">MonkeyRunner</a></p>
<p><a href="http://stackoverflow.com/questions/14243427/set-clipboard-text-via-adb-shell-as-of-api-level-11">Set clipboard text via adb shell as of API level 11</a></p>
<h3>Monkeyrunner不支持中文直接输入</h3>
<p><a href="http://developer.android.com/tools/help/MonkeyRunner.html">MonkeyRunner</a>是一组<a href="http://www.jython.org/docs/tutorial/indexprogress.html">Jython</a>环境的Android自动测试工具，通过USB控制Android设备完成点击、拖拽、输入等操作。</p>
<p><code>MonkeyDevice</code>类的<code>type(String message)</code>方法支持向设备输入字符串，但是由于Jython本身的原因，无法支持直接输入unicode字符，</p>
<div class="highlight"><pre><span></span><span class="n">device</span> <span class="o">=</span> <span class="n">MonkeyRunner</span><span class="o">.</span><span class="n">waitForConnection</span><span class="p">()</span>
<span class="n">device</span><span class="o">.</span><span class="n">type</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span> <span class="c1"># 成功</span>
<span class="n">device</span><span class="o">.</span><span class="n">type</span><span class="p">(</span><span class="s1">&#39;测试&#39;</span><span class="p">)</span> <span class="c1"># 无输入</span>
<span class="n">device</span><span class="o">.</span><span class="n">type</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;测试&#39;</span><span class="p">)</span> <span class="c1"># 无输入</span>
</pre></div>


<p>解决的思路有两个，</p>
<ol>
<li>利用Android设备上的输入法输入中文，相对复杂。</li>
<li>利用剪贴板复制粘贴。</li>
</ol>
<p>下文实现的是利用剪贴板的思路 …</p> <a class="btn btn-info xsmall" href="../archives/monkeyrunner_input_unicode.html">read more</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="../archives/python2_encoding.html"><h2>Python2字符编码问题小结</h2></a>
        <div class= "well small"> Fri 29 May 2015

by <a class="url fn" href="../author/x7.html">x7</a>
 


 </div>
        <div class="summary"><p>参考：</p>
<p><a href="https://docs.python.org/2/howto/unicode.html">Python docs - Unicode HOWTO</a></p>
<p><a href="https://docs.python.org/2/library/stdtypes.html">Python docs - Built-in Types</a></p>
<p><a href="http://stackoverflow.com/questions/2596714/why-does-python-print-unicode-characters-when-the-default-encoding-is-ascii">Stack Overflow - Why does Python print unicode characters when the default encoding is ASCII?</a></p>
<h2>理论</h2>
<h3>编码中的Unicode和UTF-8</h3>
<p><code>Unicode</code>是字符集，<code>UTF-8</code>是<code>Unicode</code>的一种编码方式，并列的还包括<code>UTF-16</code>、<code>UTF-32</code>等。</p>
<p>某个字符的<code>Unicode</code>通过查询标准得到，其<code>UTF-8</code>编码由<code>Unicode</code>码计算得到。</p>
<h3>Python2中的str和unicode</h3>
<p><code>str</code>和<code>unicode</code>是两个不同的类。</p>
<p><code>str</code>存储的是已经编码后的字节序列 …</p> <a class="btn btn-info xsmall" href="../archives/python2_encoding.html">read more</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="../archives/android_ibeacon_receive.html"><h2>Android设备上实现苹果IBeacon协议信号接收</h2></a>
        <div class= "well small"> Fri 26 September 2014

by <a class="url fn" href="../author/x7.html">x7</a>
 


 </div>
        <div class="summary"><h3>背景资料</h3>
<p><a href="http://stackoverflow.com/questions/18906988/what-is-the-ibeacon-bluetooth-profile">这里</a>详细介绍了iBeacon协议中的关键字段，此Demo根据协议中的字段，将蓝牙扫描到的记录字段做解析，判断记录是否是iBeacon包，并获得iBeacon中的信息字段，包括UUID，major，minor，txpower。</p>
<blockquote>
<p>02 # Number of bytes that follow in first AD structure</p>
<p>01 # Flags AD type</p>
<p>1A # Flags value 0x1A = 000011010</p>
<p>bit 0 (OFF) LE Limited Discoverable Mode</p>
<p>bit 1 (ON) LE General Discoverable Mode</p>
<p>bit 2 (OFF) BR/EDR Not …</p></blockquote> <a class="btn btn-info xsmall" href="../archives/android_ibeacon_receive.html">read more</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="../archives/android_voice_communication.html"><h2>Android声波通信</h2></a>
        <div class= "well small"> Fri 26 September 2014

by <a class="url fn" href="../author/x7.html">x7</a>
 


 </div>
        <div class="summary"><p>参考：</p>
<p><a href="https://github.com/Katee/quietnet">Quietnet</a></p>
<h3>发送部分</h3>
<p>通过超声波(19.1kHz)携带信息，OOK调制，叠加一段音乐后发送。</p>
<h4>编码</h4>
<p>由于采用了较简单的OOK调制，所以要在调制前把目标信息编码成二进制。采用<a href="https://github.com/Katee/quietnet">这个Python工程</a>的编码。</p>
<p>编码采用类似霍夫曼编码的思路，但是为了在接收时判断字符的开始结束，引入了对编码的限制。因为接收时通过两个连续的0判定一个自负的结束，所以要求编码首尾都是1，而且不出现连续的0。</p>
<h4>调制</h4>
<p>每个bit字符占用3个chunk，即重复3遍发送，这是为了在接收时方便判定同步，否则如果接收的采样区间跨越了0和1两个不同的比特，就会造成解调错误。</p>
<p>采用OOK调制。1bit对应有声波，声波波形采用正弦波，与采样率相关，用如下方法计算数组的值；0bit对应没有声波。</p>
<div class="highlight"><pre><span></span>for (int j = 0; j &lt; Constants.DATASIZE; j++) {
    tone[j] = Math.sin(2 * Math.PI * freq
        * ((double …</pre></div> <a class="btn btn-info xsmall" href="../archives/android_voice_communication.html">read more</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="../archives/mysql_sort_using_case.html"><h2>SQL中利用case语句根据多列排序</h2></a>
        <div class= "well small"> Thu 29 May 2014

by <a class="url fn" href="../author/x7.html">x7</a>
 


 </div>
        <div class="summary"><p>参考：</p>
<p><a href="http://blog.csdn.net/chen_linbo/article/details/6396122">oracle union all和order by一起使用</a></p>
<p>需求是这样的，有类似如下的表，</p>
<div class="highlight"><pre><span></span>+--------+------+-----+-----+------+---------+----------+
| userid | imei | lat | lon | addr | network | operator |
+--------+------+-----+-----+------+---------+----------+
| 122    | 343  |     |     |      | 3G      | 12344    |
| 123    | 345  |     |     |      | Wi-Fi   | 12345    |
| 124    | 346  |     |     |      | Wi-Fi   | 12345    |
| 125    | 347  |     |     |      | 3G      | 12345    |
| 126    | 348  |     |     |      | 3G      | 12346    |
| 127    | 349  |     |     |      | 3G      | 12347    |
| 128    | 350  |     |     |      | 3G      | 12343    |
| 129    | 351  |     |     |      | 3G      | 12345    |
| 130    | 352  |     |     |      | 2G      | 12345 …</pre></div> <a class="btn btn-info xsmall" href="../archives/mysql_sort_using_case.html">read more</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="../archives/latex_on_linux.html"><h2>Linux系统中LaTeX的安装与使用</h2></a>
        <div class= "well small"> Mon 17 March 2014

by <a class="url fn" href="../author/x7.html">x7</a>
 


 </div>
        <div class="summary"><h3>安装</h3>
<p>针对Archlinux，需要<a href="https://wiki.archlinux.org/index.php/TeX_Live">TeX Live</a>，首先要编译LaTeX文件需要这个包<code>texlive-bin</code>，有一些图片字体之类的依赖，在这一组包里<code>texlive-most</code>。</p>
<p>如果想用vim或者emacs编辑LaTeX文件的话，就不需要专门的编辑器了。</p>
<p>Linux下的LaTeX编辑器<a href="https://wiki.archlinux.org/index.php/Latex">有很多</a>，我使用的是<code>Kile</code>，KDE的组件，在Gnome和xfce下也可以正常使用，虽然不能像retext编辑Markdown那样实时预览，不过比起vim需要配置一堆插件来说还是很方便的。</p>
<h3>使用</h3>
<p>LaTeX文件后缀通常为<code>.tex</code>。可以在命令行直接编译，</p>
<div class="highlight"><pre><span></span>latex source.tex
</pre></div>


<p>用<code>Kile</code>编辑文件，可以直接通过''QuickBuild''编译生成pdf并直接打开预览。</p>
<h4>Helloworld</h4>
<p>简单测试代码，很容易理解，</p>
<div class="highlight"><pre><span></span><span class="k">\documentclass</span><span class="na">[11pt]</span><span class="nb">{</span>article<span class="nb">}</span>
<span class="k">\usepackage</span><span class="nb">{</span>cite<span class="nb">}</span>

<span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span>

<span class="k">\title</span><span class="nb">{</span>My Article<span class="nb">}</span>
<span class="k">\author</span><span class="nb">{</span>Nobody Jr.<span class="nb">}</span>
<span class="k">\date</span><span class="nb">{</span>Today<span class="nb">}</span>
<span class="k">\maketitle …</span></pre></div> <a class="btn btn-info xsmall" href="../archives/latex_on_linux.html">read more</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="../archives/page_build_failed.html"><h2>用Pelican构建博客上传到Github Pages出错</h2></a>
        <div class= "well small"> Wed 04 December 2013

by <a class="url fn" href="../author/x7.html">x7</a>
 


 </div>
        <div class="summary"><p>参考：</p>
<p><a href="https://help.github.com/articles/using-submodules-with-pages">Using submodules with Pages</a></p>
<h3>出错情况</h3>
<p>上次写完博客，上传Github的时候突然出问题了，现在当然已经修复。</p>
<p>用<code>pelican</code>和<code>markdown</code>本地编译成功，但是用<code>git</code>提交到<code>Github</code>时，收到了这么一封邮件，</p>
<blockquote>
<p>From:  GitHub (noreply@github.com) This sender is in your safe list.</p>
<p>Sent:  Saturday, November 30, 2013 1:06:57 PM</p>
<p>To:    x7hub (x7.0@outlook.com)</p>
<p>The page build …</p></blockquote> <a class="btn btn-info xsmall" href="../archives/page_build_failed.html">read more</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="../archives/zsh_array.html"><h2>对比zsh和bash中的数组与关联数组</h2></a>
        <div class= "well small"> Sat 30 November 2013

by <a class="url fn" href="../author/x7.html">x7</a>
 


 </div>
        <div class="summary"><p>参考：</p>
<p>Linux Shell脚本攻略 人民邮电出版社</p>
<h3>数组</h3>
<p>可以这样定义数组，在<code>bash</code>和<code>zsh</code>都可以，</p>
<div class="highlight"><pre><span></span><span class="nv">array_var</span><span class="o">=(</span><span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span> <span class="m">6</span><span class="o">)</span>
</pre></div>


<p>但是，读数组的时候有区别，在<code>bash</code>中，数组索引以<code>0</code>开始，符合一般习惯，</p>
<div class="highlight"><pre><span></span><span class="o">[</span>x7@localhost ~<span class="o">]</span>$ <span class="nv">array_var</span><span class="o">=(</span><span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span> <span class="m">6</span><span class="o">)</span>
<span class="o">[</span>x7@localhost ~<span class="o">]</span>$ <span class="nb">echo</span> <span class="si">${</span><span class="nv">array_var</span><span class="si">}</span>
<span class="m">1</span>
<span class="o">[</span>x7@localhost ~<span class="o">]</span>$ <span class="nb">echo</span> <span class="si">${</span><span class="nv">array_var</span><span class="p">[0]</span><span class="si">}</span>
<span class="m">1</span>
</pre></div>


<p>但是，在<code>zsh …</code></p> <a class="btn btn-info xsmall" href="../archives/zsh_array.html">read more</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="../archives/android_service_dialog.html"><h2>对Service中弹出的Dialog设置主题</h2></a>
        <div class= "well small"> Tue 05 November 2013

by <a class="url fn" href="../author/x7.html">x7</a>
 


 </div>
        <div class="summary"><p>参考：</p>
<p><a href="http://blog.csdn.net/huxueyan521/article/details/8954844">service中显示一个dialog</a></p>
<p><a href="http://www.cnblogs.com/noTice520/archive/2011/02/01/1948738.html">android UI进阶之style和theme的使用</a></p>
<h3>简介</h3>
<p>有一个Dialog需要在多个应用中的多个位置调用，需要用Intent调起，于是想出的办法是Intent调起一个Service，重写这个Service的<code>onStartCommand</code>方法在其中弹出Dialog。弹出Dialog后发现主题与软件整体采用的<code>Theme.Holo.Light</code>不一致，于是找到了为弹出的对话框设置主题的方法，在文中给出。</p>
<h3>Services中弹出Dialog</h3>
<p>新建一个Service并在<code>AndroidManifest.xml</code>中声明<code>Service</code>和<code>intent-filter</code>，在需要的地方用Intent调起，不谈。</p>
<p>用<code>startService(intent)</code>调起Service后的操作需要重写<code>onStartCommand</code>方法，在其中尝试按照平常的方法调起Dialog：</p>
<div class="highlight"><pre><span></span><span class="n">Dialog</span> <span class="n">dialog</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Dialog</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
<span class="n">dialog</span><span class="o">.</span><span class="na">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">something</span><span class="o">);</span>
<span class="n">dialog</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>
</pre></div>


<p>这样尝试调起Dialog会引起错误：</p>
<div class="highlight"><pre><span></span><span class="mi">11</span><span class="o">-</span><span class="mo">05 …</span></pre></div> <a class="btn btn-info xsmall" href="../archives/android_service_dialog.html">read more</a></div>
    </div>	
				
<div class="pagination">
<ul>
    <li class="prev disabled"><a href="#">&larr; Previous</a></li>

    <li class="active"><a href="../author/x7.html">1</a></li>
    <li class=""><a href="../author/x72.html">2</a></li>

    <li class="next"><a href="../author/x72.html">Next &rarr;</a></li>

</ul>
</div>
 
  
        </div>
        
        <div class="span3">

            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Site
                </li>
            
                <li><a href="../archives.html">Archives</a>
                <li><a href="../tags.html">Tags</a>



                <li><a href="https://x7blog.info/feeds/all.rss.xml" rel="alternate">RSS feed</a></li>

            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Categories
                </li>
                
                <li><a href="../category/android.html">Android</a></li>
                <li><a href="../category/blog.html">blog</a></li>
                <li><a href="../category/latex.html">LaTeX</a></li>
                <li><a href="../category/linux.html">Linux</a></li>
                <li><a href="../category/php.html">PHP</a></li>
                <li><a href="../category/python.html">Python</a></li>
                <li><a href="../category/sql.html">SQL</a></li>
                   
            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Links
                </li>
            
                <li><a href="http://www.blackmomo.com/">陌阁</a></li>
            </ul>
            </div>


            <div class="social">
            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Social
                </li>
           
                <li><a href="https://github.com/x7hub">GitHub</a></li>
                <li><a href="https://twitter.com/x7tter">Twitter</a></li>
                <li><a href="https://www.facebook.com/rong.feng.9484">Facebook</a></li>
            </ul>
            </div>
            </div>

        </div>  
    </div>     </div> 
<footer>
<br />
<p><a href="..">x7's blog</a> &copy; x7 2015</p>
</footer>

</div> <!-- /container -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="../theme/bootstrap-collapse.js"></script>
 
</body>
</html>